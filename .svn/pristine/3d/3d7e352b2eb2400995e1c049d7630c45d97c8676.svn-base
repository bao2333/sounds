<template>
    <div>
        <div>
            <el-breadcrumb separator="/">
                <el-breadcrumb-item :to="{ name: 'userReport' }" >用户举报</el-breadcrumb-item>
                <el-breadcrumb-item class="now_page">查封账户</el-breadcrumb-item>
            </el-breadcrumb>
        </div>
        <section>
            <el-input v-model="searchName" placeholder="请输入举报次数" size="mini" style="display:inline-block;width:200px;"></el-input>
            <el-button type="primary" size="mini" @click="getList()">查询</el-button>
            <el-table :data="tableData" style="width: 100%;margin-top:15px" border size="small" v-loading="loading">
                <el-table-column prop="name" label="被举报人" align="center"></el-table-column>
                <el-table-column label="被举报总数" align="center">
                    <template slot-scope="props">
                        {{ props.row.allCount == null ? 0 : props.row.allCount }}
                    </template>
                </el-table-column>
                <el-table-column prop="countONWeekday" label="这周被举报" align="center"></el-table-column>
                <el-table-column label="查封时间" align="center">
                    <template slot-scope="props">
                        {{ new Date(props.row.startTime) | moment('YYYY-MM-DD HH:mm:ss') }}
                    </template>
                </el-table-column>
                <el-table-column label="解封时间" align="center">
                    <template slot-scope="props">
                        {{ new Date(props.row.endTime) | moment('YYYY-MM-DD HH:mm:ss') }}
                    </template>
                </el-table-column>
                <el-table-column label="当前状态" align="center">
                    <template slot-scope="props">
                        {{ props.row.status == 0 ? '封禁中' : props.row.status == 1 ? '已解封' : '' }}
                    </template>
                </el-table-column>
            </el-table>
            <div class="block" style="float: right;margin-top: 15px">
                <el-pagination layout="total,prev, pager, next" :page-size="size" background :page-count="count" :total="total" @current-change="handleCurrentChange"></el-pagination>
            </div>
        </section>
    </div>
</template>

<script>
    export default {
        name: "userClose",
        data(){
            return{
                loading:false,
                tableData:[],
                searchName:'',      //搜索的名字
                page:1,         //当前页数
                total:null,   //分页总条目数
                size:null,   //分页页数
                count:null,   //页数
            }
        },
        created(){
            this.getList()
        },
        methods:{
            handleCurrentChange(val){
                this.page = val;
                this.getList()
            },
            getList(){
                const page = this.page;
                this.loading = true;
                this.$api.jubao.chafeng_list(data=>{
                    this.loading = false;
                    this.tableData = data.result;
                    this.total = data.pageInfo.total;
                    this.size = data.pageInfo.pageSize;
                    this.count = data.pageInfo.pages;
                },{
                    pageNum:page,
                    name:this.searchName==''?null:this.searchName
                })
            }
        }
    }
</script>

<style scoped>
section{
    margin-top: 15px;
}
</style>
