<template>
    <div>
      <div class="box">
        <button class="play_button" @click="play_click()" v-show="button_show">
          <i class="ion ion-ios-play align-middle"></i>
        </button>
        <button class="play_button"  @click="paused_click()" v-show="!button_show" >
          <i class="ion ion-ios-pause align-middle"></i>
        </button>
        <audio  @ended="ended()" @timeupdate="getPlayTime" :src="$oss.url+url"  ref="personal_play">
          <!-- <source :src="$oss.url+url" type="audio/mpeg"> -->
        </audio>
        <span v-if="form!==1">{{second}}s</span>
      </div>

    </div>
</template>

<script>

    export default {
        name: "audioPlayer",
        props:{
          url:String,
          second:Number,
          form:Number
        },
      data(){
        return{
          button_show:true,   //播放按钮显示隐藏
        }
      },
      created(){
        
      },
      mounted(){
        // console.log(this.url)
      },
      watch:{

      },
      methods:{
        //点击播放
        play_click(){
          this.button_show = false
          //点击触发播放事件
          this.$nextTick(()=>{
            this.$refs.personal_play.play()
          })
        },
        paused_click(){
          //点击触发暂停事件
          this.$nextTick(()=>{
            this.$refs.personal_play.pause()
            this.button_show = true
          });
        },
        //播放完毕，按钮回归播放状态
        ended(){
          this.button_show = true
        },
        getPlayTime(e){
          // console.log(e.target.currentTime)  //获取播放的时间
          // this.second = parseInt(e.target.duration)
          // console.log(e.target.duration)  //获取播放的时间
        }
      }
    }
</script>

<style scoped lang="less">
  @theme_color:rgb(255, 64, 129);
  .box{
    width: 100px;
    overflow: hidden;
    background-color:rgba(255, 64, 129,0.3);
    border-radius: 15px;
    span{
      color: #fff;
      float: right;
      line-height: 30px;
      margin-right: 12px;
    }
  }
  .play_button {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    float: left;
    background-color: @theme_color;
    border: none;
    cursor: pointer;
    i {
      color: #FFF;
    }
  }
</style>
