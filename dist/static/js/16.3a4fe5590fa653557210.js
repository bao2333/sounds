webpackJsonp([16],{CUVk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("/Z0X"),s={name:"start",data:function(){return{editorImg:"",plusShow:!0,showTime:"",imgId:""}},created:function(){this.getImgData()},methods:{getImgData:function(){var e=this;this.$api.qd.qd_img(function(t){e.editorImg=t[0].coverResource,e.imgId=t[0].id,e.plusShow=!1,e.showTime=t[0].timeDuration+"秒"},{type:0})},cancelImg:function(){this.getImgData()},editorImgMethods:function(){var e=this;this.$api.qd.qd_editor(function(){e.getImgData(),e.$notify({type:"success",message:"修改启动页成功！",title:"成功"})},{id:this.imgId,coverResource:this.editorImg,timeDuration:parseInt(this.showTime.replace("秒",""))})},selectIcon:function(){this.$refs.iconFile.click(),this.$refs.iconFile.value=null},iconFileChange:function(e){var t=this,i=e.target.files[0];if(".png"!=!i.name.substring(i.name.lastIndexOf("."))){var s=new FileReader;s.onload=function(e){var s=e.target.result,n=new Image;n.onload=function(){var e=n.width,s=n.height;e<200||s<400?t.$notify.error({title:"操作提示",message:"图片大小必须大于200*400！"}):t.$api.oss.update(function(e){new a.Wrapper({region:"oss-cn-hangzhou",accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.securityToken,bucket:"sounds-miyu"}).put(e.random,i).then(function(e){t.editorImg=e.name,t.plusShow=!1}).catch(function(e){console.error("error: %j",e)})},{})},n.src=s},s.readAsDataURL(i)}}}},n=i("XyMi");var c=function(e){i("c3gw")},o=Object(n.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{}}},[e._v("启动页管理")]),e._v(" "),i("el-breadcrumb-item",{staticClass:"now_page"},[e._v("启动页")])],1)],1),e._v(" "),i("section",[i("h3",[e._v("启动页")]),e._v(" "),i("div",{staticClass:"add_head",on:{click:e.selectIcon}},[i("img",{attrs:{src:e.$oss.url+e.editorImg,alt:"",width:"200"}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.plusShow,expression:"plusShow"}],staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("input",{ref:"iconFile",staticStyle:{display:"none"},attrs:{accept:"image/jpeg, image/png",type:"file",name:"icon"},on:{change:e.iconFileChange}}),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"show_time"},[e._v("显示时间：\n      "),i("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{placeholder:"请选择显示时间",size:"small"},model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}}),e._v(" "),i("div",{staticStyle:{"margin-top":"35px"}},[i("el-button",{staticClass:"cancel",attrs:{size:"small"},on:{click:function(t){e.cancelImg()}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"change",attrs:{size:"small"},on:{click:function(t){e.editorImgMethods()}}},[e._v("修改")])],1)],1)])])},[],!1,c,"data-v-fcd9946a",null);t.default=o.exports},c3gw:function(e,t){}});