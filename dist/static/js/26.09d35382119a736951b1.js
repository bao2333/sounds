webpackJsonp([26],{u4Qg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),l=a("exGp"),s=a.n(l),i=a("Av7u"),o=a.n(i),m={name:"userSearch",data:function(){return{loading:!1,printType:!0,search:{item:"0",jingzhun:""},form:{date:"",dateItem:"",minNum:null,maxNum:null,numItem:""},tableData:[],page:1,total:null,size:null,count:null,userNums:{}}},created:function(){this.selectRrcord(),this.showList()},methods:{showList:function(){var t=this;return s()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,e.next=3,t.$api.user.tongji(function(e){t.userNums=e.userNums},{pageNum:a});case 3:case"end":return e.stop()}},e,t)}))()},selectRrcord:function(){var t=this,e=this.page;this.loading=!0,this.printType=!0,this.$api.user.search_shaixuan(function(e){console.log(e),t.loading=!1,t.tableData=e.result,t.total=e.pageInfo.total,t.size=e.pageInfo.pageSize,t.count=e.pageInfo.pages},{pageNum:e,registerStart:1==this.form.item?this.form.date[0]:"",registerEnd:1==this.form.item?this.form.date[1]:"",loginTimeStart:2==this.form.item?this.form.date[0]:"",loginTimeEnd:2==this.form.item?this.form.date[1]:"",birthdayStart:3==this.form.item?this.form.date[0]:"",birthdayEnd:3==this.form.item?this.form.date[1]:"",allWithdrawStart:2==this.form.numItem?parseInt(this.form.minNum):"",allWithdrawEnd:2==this.form.numItem?parseInt(this.form.maxNum):"",balanceStart:1==this.form.numItem?parseInt(this.form.minNum):"",balanceEnd:1==this.form.numItem?parseInt(this.form.maxNum):"",fansStart:5==this.form.numItem?parseInt(this.form.minNum):"",fansEnd:5==this.form.numItem?parseInt(this.form.maxNum):"",followStart:6==this.form.numItem?parseInt(this.form.minNum):"",followEnd:6==this.form.numItem?parseInt(this.form.maxNum):"",reportNumStart:3==this.form.numItem?parseInt(this.form.minNum):"",reportNumEnd:3==this.form.numItem?parseInt(this.form.maxNum):"",beReportNumStart:4==this.form.numItem?parseInt(this.form.minNum):"",beReportNumEnd:4==this.form.numItem?parseInt(this.form.maxNum):""})},jingzhunSearch:function(){var t=this;this.printType=!1,this.loading=!0;var e=this.page;this.$api.user.search_jz(function(e){t.loading=!1,t.tableData=e.result,t.total=e.pageInfo.total,t.size=e.pageInfo.pageSize},{pageNum:e,type:parseInt(this.search.item),name:this.search.jingzhun})},print:function(t){var e=this;return s()(r.a.mark(function a(){var n,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.localStorage.getItem("miyu.userId");case 2:return n=a.sent,a.next=5,window.localStorage.getItem("miyu.token");case 5:l=a.sent,1==t&&(e.page=null),e.$ajax.get("/user/screeningSearchPrint",{params:{pageNum:e.page,registerStart:1==e.form.item?e.form.date[0]:null,registerEnd:1==e.form.item?e.form.date[1]:null,loginTimeStart:2==e.form.item?e.form.date[0]:null,loginTimeEnd:2==e.form.item?e.form.date[1]:null,birthdayStart:3==e.form.item?e.form.date[0]:null,birthdayEnd:3==e.form.item?e.form.date[1]:null,allWithdrawStart:2==e.form.numItem?parseInt(e.form.minNum):null,allWithdrawEnd:2==e.form.numItem?parseInt(e.form.maxNum):null,balanceStart:1==e.form.numItem?parseInt(e.form.minNum):null,balanceEnd:1==e.form.numItem?parseInt(e.form.maxNum):null,fansStart:5==e.form.numItem?parseInt(e.form.minNum):null,fansEnd:5==e.form.numItem?parseInt(e.form.maxNum):null,followStart:6==e.form.numItem?parseInt(e.form.minNum):null,followEnd:6==e.form.numItem?parseInt(e.form.maxNum):null,reportNumStart:3==e.form.numItem?parseInt(e.form.minNum):null,reportNumEnd:3==e.form.numItem?parseInt(e.form.maxNum):null,beReportNumStart:4==e.form.numItem?parseInt(e.form.minNum):null,beReportNumEnd:4==e.form.numItem?parseInt(e.form.maxNum):null,token:o.a.enc.Base64.stringify(o.a.enc.Utf8.parse(n+":"+l))}}).then(function(t){var e=t.request.responseURL;window.location.href=e}).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},printJingzhun:function(t){var e=this;return s()(r.a.mark(function a(){var n,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.localStorage.getItem("miyu.userId");case 2:return n=a.sent,a.next=5,window.localStorage.getItem("miyu.token");case 5:l=a.sent,1==t&&(e.page=null),e.$ajax.get("/user/advancedSearchPrint",{params:{type:parseInt(e.search.item),name:""==e.search.jingzhun?null:e.search.jingzhun,pageNum:e.page,token:o.a.enc.Base64.stringify(o.a.enc.Utf8.parse(n+":"+l))}}).then(function(t){var e=t.request.responseURL;window.location.href=e}).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},handleCurrentChange:function(t){this.page=t,this.selectRrcord(),this.jingzhunSearch()},changeRole:function(t){var e=this;this.userRow=0==t.role?"新秀":"大V",this.$confirm('<p>确定要改变此用户级别为<span style="color:red;font-size: 16px"> '+this.userRow+" </span>吗？</p>","提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"success"}).then(function(){e.$api.user.editor_user_role(function(){e.showList(),e.$notify({type:"success",message:"修改级别成功",title:"成功"})},{userId:t.id,role:0==t.role?1:1==t.role?0:null})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},u=a("XyMi");var c=function(t){a("zA7/")},p=Object(u.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/users/list"}}},[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",{staticClass:"now_page"},[t._v("档案搜索")])],1),t._v(" "),a("section",{staticClass:"section_head"},[a("ul",[a("li",[t._m(0),t._v(" "),a("p",{staticClass:"li_num"},[t._v(t._s(t.userNums.manNum))])]),t._v(" "),a("li",[a("p",[t._v("女生数")]),t._v(" "),a("p",{staticClass:"li_num"},[t._v(t._s(t.userNums.femaleNum))])]),t._v(" "),a("li",[a("p",[t._v("总人数")]),t._v(" "),a("p",{staticClass:"li_num"},[t._v(t._s(t.userNums.allNum))])]),t._v(" "),a("li",[a("p",[t._v("男：女占比")]),t._v(" "),a("p",{staticClass:"li_num"},[t._v(t._s(t.userNums.percentMale)+"% : "+t._s(t.userNums.percentageWomen)+"%")])])]),t._v(" "),a("hr")]),t._v(" "),a("div",{staticClass:"section_middle"},[a("section",{staticClass:"section_jingzhun"},[a("h3",[t._v("精准搜索")]),t._v(" "),a("div",[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.search.item,callback:function(e){t.$set(t.search,"item",e)},expression:"search.item"}},[a("el-option",{attrs:{label:"用户名",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"手机号",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"微博号",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"微信号",value:"3"}})],1),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{placeholder:"精准搜索",size:"small","prefix-icon":"el-icon-search"},model:{value:t.search.jingzhun,callback:function(e){t.$set(t.search,"jingzhun",e)},expression:"search.jingzhun"}}),t._v(" "),a("el-button",{staticClass:"searchButton",attrs:{size:"small"},on:{click:function(e){t.jingzhunSearch()}}},[t._v("搜索档案")])],1)]),t._v(" "),a("hr"),t._v(" "),a("section",{staticClass:"section_shaixuan"},[a("h3",[t._v("筛选搜索")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"日期搜索:"}},[a("el-date-picker",{staticStyle:{width:"380px"},attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.form.item,callback:function(e){t.$set(t.form,"item",e)},expression:"form.item"}},[a("el-option",{attrs:{label:"注册时间",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"最近登录时间",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"信息生日",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"数量搜索:"}},[a("el-input",{staticClass:"search_num",attrs:{placeholder:"最小整数",size:"small"},model:{value:t.form.minNum,callback:function(e){t.$set(t.form,"minNum",e)},expression:"form.minNum"}}),t._v(" "),a("span",{staticStyle:{padding:"0 10px"}},[t._v("---------------")]),t._v(" "),a("el-input",{staticClass:"search_num",attrs:{placeholder:"最大整数",size:"small"},model:{value:t.form.maxNum,callback:function(e){t.$set(t.form,"maxNum",e)},expression:"form.maxNum"}}),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.form.numItem,callback:function(e){t.$set(t.form,"numItem",e)},expression:"form.numItem"}},[a("el-option",{attrs:{label:"账户余额",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"总提现",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"举报别人",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"被人举报",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"粉丝数",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"关注数",value:"6"}})],1)],1),t._v(" "),a("el-button",{staticClass:"formButton",attrs:{size:"small",icon:"el-icon-search"},on:{click:function(e){t.selectRrcord()}}},[t._v("搜索档案")])],1)],1)]),t._v(" "),a("hr"),t._v(" "),a("main",[a("section",{staticClass:"section_title"},[a("h3",[t._v("用户列表")]),t._v(" "),a("div",{staticClass:"search"},[a("el-button",{staticClass:"click_dangan",staticStyle:{"margin-left":"10px"},attrs:{size:"small",plain:""},on:{click:function(e){t.print(0)}}},[t._v(" 打印当前页")]),t._v(" "),a("el-button",{staticClass:"click_dangan",staticStyle:{"margin-left":"10px"},attrs:{size:"small",plain:""},on:{click:function(e){t.print(1)}}},[t._v(" 打印全部")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.printType,expression:"!printType"}],staticClass:"click_dangan",staticStyle:{"margin-left":"10px"},attrs:{size:"small",plain:""},on:{click:function(e){t.printJingzhun(0)}}},[t._v(" 打印当前页精准")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.printType,expression:"!printType"}],staticClass:"click_dangan",staticStyle:{"margin-left":"10px"},attrs:{size:"small",plain:""},on:{click:function(e){t.printJingzhun(1)}}},[t._v(" 打印全部精准")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.tableData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"用户编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"注册时间",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("moment")(new Date(e.row.createTime),"YYYY-MM-DD HH:mm:ss"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"账户名称",align:"center"}}),t._v(" "),3==t.search.item?a("el-table-column",{attrs:{prop:"wechatName",label:"微信名",align:"center"}}):t._e(),t._v(" "),2==t.search.item?a("el-table-column",{attrs:{prop:"weiBoName",label:"微博名",align:"center"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"性别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.sex?"女":1==e.row.sex?"男":"")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"birthday",label:"生日",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"role",label:"级别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.changeRole(e.row)}}},[t._v(t._s(0==e.row.role?"大V":1==e.row.role?"新秀":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fansNum",label:"粉丝数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"followNum",label:"关注数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reportCount",label:"举报数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"beReportAllCount",label:"被举报数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rechargeSheetSum",label:"充值",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"incomeWithdrewSum",label:"提现",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"最后登录",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("moment")(new Date(e.row.latestLogin),"YYYY-MM-DD HH:mm:ss"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"查看档案",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){t.$router.push({name:"userPersonalFile",params:{userId:e.row.id}})}}},[t._v("查看档案")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",background:"","page-size":t.size,"page-count":t.count,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("男生数")])])}],!1,c,"data-v-74161cda",null);e.default=p.exports},"zA7/":function(t,e){}});