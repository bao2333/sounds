webpackJsonp([41],{BKAQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("/Z0X"),s=[{name:"所有男性",id:1},{name:"所有女性",id:2},{name:"所有大V",id:3},{name:"所有星秀",id:4}],a={name:"addOrEditor",data:function(){return{articleContent:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],["clean"],[{align:[]},"image"]]},placeholder:"请输入文章内容 ..."},users:s,checkedUsers:[],checkAll:!1,isIndeterminate:!0,ossurl:"",showIcon:!0,title:""}},created:function(){},methods:{handleCheckAllChange:function(e){this.checkedUsers=1==e?this.users:[],this.isIndeterminate=!1},handleCheckedUsersChange:function(e){var t=e.length;t===this.users.length&&(this.checkAll=!0,this.isIndeterminate=!1),t>0&&t<this.users.length&&(this.isIndeterminate=!0)},addPushInformation:function(){var e=this;""==this.ossurl||""==this.title||""==this.articleContent?this.$notify({type:"warning",message:"请完善信息后再进行添加！！",title:"警告"}):""===this.ossurl&&""===this.title&&""===this.articleContent||this.$api.oss.update(function(t){new n.Wrapper({region:"oss-cn-hangzhou",accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,stsToken:t.securityToken,bucket:"sounds-miyu"}).put(t.random,new Blob([e.articleContent])).then(function(t){var i=[];e.checkedUsers.map(function(e){i.push(e.id)}),e.$api.find.activity_add(function(){e.$notify({type:"success",message:"添加推送消息成功，手机会有推送哦！",title:"成功"}),e.$router.push({name:"informationActivity"})},{icon:e.ossurl,title:e.title,content:t.name,peopleType:i})}).catch(function(e){console.error("error: %j",e)})})},selectIcon:function(){this.$refs.iconFile.click(),this.$refs.iconFile.value=null},iconFileChange:function(e){var t=this,i=e.target.files[0];if(".png"!=!i.name.substring(i.name.lastIndexOf("."))){var s=new FileReader;s.onload=function(e){var s=e.target.result,a=new Image;a.onload=function(){a.width,a.height;t.$api.oss.update(function(e){new n.Wrapper({region:"oss-cn-hangzhou",accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.securityToken,bucket:"sounds-miyu"}).put(e.random,i).then(function(e){t.ossurl=e.name,t.showIcon=!1}).catch(function(e){console.error("error: %j",e)})},{})},a.src=s},s.readAsDataURL(i)}}}},c=i("XyMi");var o=function(e){i("gPZ2")},r=Object(c.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/information/official"}}},[e._v("官方消息")]),e._v(" "),i("el-breadcrumb-item",{attrs:{to:{path:"/information/activity"}}},[e._v("推动活动")]),e._v(" "),i("el-breadcrumb-item",{staticClass:"now_page"},[e._v("新增活动")])],1)],1),e._v(" "),i("section",[i("h3",[e._v("新增活动")]),e._v(" "),i("div",{staticClass:"edit",staticStyle:{"margin-top":"15px"}},[i("div",{staticClass:"update_img"},[i("div",{staticClass:"add_head",on:{click:e.selectIcon}},[i("img",{attrs:{src:e.$oss.url+e.ossurl,alt:"",width:"148",height:"148"}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("input",{ref:"iconFile",staticStyle:{display:"none"},attrs:{accept:"image/jpeg,image/png",type:"file",name:"icon"},on:{change:e.iconFileChange}})]),e._v(" "),i("el-input",{staticStyle:{width:"20%",margin:"15px auto",display:"block"},attrs:{size:"mini",placeholder:"请输入消息标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("quill-editor",{ref:"textEditor",staticStyle:{width:"75%",margin:"15px auto",height:"auto"},attrs:{options:e.editorOption},model:{value:e.articleContent,callback:function(t){e.articleContent=t},expression:"articleContent"}}),e._v(" "),i("div",{staticClass:"check_radio"},[i("p",[e._v("选择用户类型：")]),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),i("el-checkbox-group",{on:{change:e.handleCheckedUsersChange},model:{value:e.checkedUsers,callback:function(t){e.checkedUsers=t},expression:"checkedUsers"}},e._l(e.users,function(t,n){return i("el-checkbox",{key:n,attrs:{label:t}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),i("div",{staticClass:"buttonPost"},[i("el-button",{staticClass:"quxiao",on:{click:function(t){e.$router.push({name:"informationActivity"})}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"submitActivity",on:{click:function(t){e.addPushInformation()}}},[e._v("提交")])],1)],1)])])},[],!1,o,"data-v-13a808a7",null);t.default=r.exports},gPZ2:function(e,t){}});