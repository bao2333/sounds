webpackJsonp([24],{cfAT:function(e,t){},uDI1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("/Z0X"),n={name:"start",components:{audioPlayer:a("gWLT").a},data:function(){return{editorImg:"",plusShow:!0,defaultAudio:"",defaultSecond:null,itemType:null}},created:function(){this.getImgData()},methods:{getImgData:function(){var e=this;this.$api.set.default_set(function(t){e.editorImg=t.defaultHead,e.defaultAudio=t.defaultVoice,e.defaultSecond=parseInt(t.defaultVoiceTime)})},cancelImg:function(){this.getImgData()},editorImgMethods:function(){var e=this,t=document.getElementById("audio_duration");t.load(),t.oncanplay=function(){e.$api.set.default_editor(function(){e.getImgData(),e.$notify({type:"success",message:"修改默认头像、语音成功！",title:"成功"})},{defaultHead:e.editorImg,defaultVoice:e.defaultAudio,defaultVoiceTime:parseInt(t.duration)})}},selectIcon:function(e){this.itemType=e,1==e?(this.$refs.audioFile.click(),this.$refs.audioFile.value=null):(this.$refs.iconFile.click(),this.$refs.iconFile.value=null)},iconFileChange:function(e){var t=this,a=e.target.files[0];if(".png"!=!a.name.substring(a.name.lastIndexOf(".")))if(""==a.type)this.$notify({type:"error",message:"不支持该文件格式,请重新上传！",title:"警告"});else{var n=new FileReader;n.onload=function(e){var n=e.target.result,s=new Image;s.onload=function(){var e=s.width,a=s.height;(e<200||a<400)&&t.$notify.error({title:"操作提示",message:"图片大小必须大于200*400！"})},s.src=n,t.$api.oss.update(function(e){new i.Wrapper({region:"oss-cn-hangzhou",accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.securityToken,bucket:"zhiyuan-hz"}).put(e.random,a).then(function(e){1==t.itemType?(t.defaultAudio=e.name,t.$notify({type:"success",message:"上传音频成功！",title:"成功"})):(t.editorImg=e.name,t.plusShow=!1)}).catch(function(e){console.error("error: %j",e)})},{})},n.readAsDataURL(a)}}}},s=a("XyMi");var o=function(e){a("cfAT")},c=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[e._v("系统设置")]),e._v(" "),a("el-breadcrumb-item",{staticClass:"now_page"},[e._v("默认头像、语音")])],1)],1),e._v(" "),a("section",[a("h3",[e._v("默认头像、语音设置")]),e._v(" "),a("div",{staticClass:"add_head",on:{click:e.selectIcon}},[a("img",{attrs:{src:e.$oss.url+e.editorImg,alt:"",width:"200"}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.plusShow,expression:"plusShow"}],staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("input",{ref:"iconFile",staticStyle:{display:"none"},attrs:{accept:"image/jpeg, image/png",type:"file",name:"icon"},on:{change:e.iconFileChange}}),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"show_time"},[a("p",[e._v("默认语音设置："),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-service",size:"mini"},on:{click:function(t){e.selectIcon(1)}}},[e._v("上传音频")])],1),e._v(" "),a("audio",{attrs:{src:e.$oss.url+e.defaultAudio,controls:"controls",id:"audio_duration"}}),e._v(" "),a("input",{ref:"audioFile",staticStyle:{display:"none"},attrs:{accept:"audio/*",type:"file",name:"icon"},on:{change:e.iconFileChange}}),e._v(" "),a("div",{staticStyle:{"margin-top":"35px"}},[a("el-button",{staticClass:"cancel",attrs:{size:"small"},on:{click:function(t){e.cancelImg()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"change",attrs:{size:"small"},on:{click:function(t){e.editorImgMethods()}}},[e._v("修改")])],1)])])])},[],!1,o,"data-v-79a6d143",null);t.default=c.exports}});