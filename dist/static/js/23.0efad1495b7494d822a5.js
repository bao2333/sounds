webpackJsonp([23],{F0Vy:function(e,t){},zunX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),i=a("exGp"),o=a.n(i),l={name:"soundStore",components:{audioPlayer:a("gWLT").a},data:function(){return{loading:!1,search:{type:"",luyin:"",deleted:"",unreviewed:""},tableData:[{date:"123"}],page:1,total:null,size:null,count:null,url:"",deg:0}},created:function(){this.showList()},methods:{play_click:function(e,t,a){var s=this;return o()(n.a.mark(function t(){var i,o,l;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.clear(),s.palyIndex=a,t.next=4,s.tableData.map(function(e){s.$set(e,"isShow",!0)});case 4:for(i=document.getElementsByTagName("audio"),o="http://sounds-miyu.oss-cn-hangzhou.aliyuncs.com/"+e,l=i.length-1;l>=0;l--)i[l].src==o&&(i[l].play(),s.paused_click(l));return t.next=9,s.$set(s.tableData[a],"isShow",!1);case 9:case"end":return t.stop()}},t,s)}))()},paused_click:function(e){for(var t=document.getElementsByTagName("audio"),a=t.length-1;a>=0;a--)a!=e&&t[a].pause()},pauseClick:function(e){this.$set(this.tableData[e],"isShow",!0)},ended:function(e){e.isShow=!0},imgClick:function(e){this.url=e},handleCurrentChange:function(e){this.page=e,this.showList()},showList:function(){var e=this;this.loading=!0;var t=this.page;this.$api.store.shenheStore(function(t){e.loading=!1,e.tableData=t.result,e.tableData.map(function(t){e.$set(t,"isShow",!0)}),e.total=t.pageInfo.total,e.size=t.pageInfo.pageSize,e.count=t.pageInfo.pages},{pageNum:t,name:""==this.search.luyin?null:this.search.luyin,userType:parseInt(this.search.type)})},shenhePass:function(e,t){var a=this;0==t?this.$api.store.shenheStore_pass(function(){a.$notify({type:"success",message:"审核成功，已通过！",title:"成功"}),a.showList()},{id:e}):1==t&&this.$api.store.shenheStore_nopass(function(){a.$notify({type:"success",message:"审核成功，不被通过！",title:"成功"}),a.showList()},{id:e})}}},r=a("XyMi");var c=function(e){a("F0Vy")},u=Object(r.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[e._v("交易商城和语音")]),e._v(" "),a("el-breadcrumb-item",{staticClass:"now_page"},[e._v("审核商城")])],1)],1),e._v(" "),a("div",{staticClass:"search"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"录音人",size:"mini",clearable:""},model:{value:e.search.luyin,callback:function(t){e.$set(e.search,"luyin",t)},expression:"search.luyin"}}),e._v(" "),a("el-select",{staticClass:"searchInput",attrs:{placeholder:"用户等级",size:"mini",clearable:""},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},[a("el-option",{attrs:{label:"新秀",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"大V",value:"1"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.showList()}}},[e._v("查询")])],1),e._v(" "),a("section",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"date",label:"录音时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("moment")(new Date(t.row.createTime),"YYYY-MM-DD HH:mm:ss"))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"录音人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"用户等级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(0==t.row.role?"大V":1==t.row.role?"新秀":"")+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格/条",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"播放语音",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"box"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!0===t.row.isShow,expression:"props.row.isShow === true"}],staticClass:"play_button",on:{click:function(a){e.play_click(t.row.voice,t.row,t.$index)}}},[a("i",{staticClass:"ion ion-ios-play align-middle"})]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!1===t.row.isShow,expression:"props.row.isShow === false"}],staticClass:"play_button",on:{click:function(a){e.paused_click(),e.pauseClick(t.$index)}}},[a("i",{staticClass:"ion ion-ios-pause align-middle"})]),e._v(" "),a("audio",{ref:"personal_play",attrs:{src:e.$oss.url+t.row.voice},on:{ended:function(a){e.ended(t.row)}}}),e._v(" "),a("span",[e._v(e._s(t.row.second)+"s")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("viewer",{attrs:{images:[t.row.picture]}},[a("img",{attrs:{src:e.$oss.url+t.row.picture,alt:"",width:"100"}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"shenheBtn",attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){e.shenhePass(t.row.id,0)}}},[e._v("审核通过")]),e._v(" "),a("el-button",{staticClass:"shenheBtn",attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){e.shenhePass(t.row.id,1)}}},[e._v("审核不通过")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","page-size":e.size,background:"","page-count":e.count,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},[],!1,c,"data-v-7c6945d0",null);t.default=u.exports}});