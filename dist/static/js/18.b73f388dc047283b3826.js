webpackJsonp([18],{"AO/p":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"userHome",data:function(){return{loading:!1,tableData:[],page:1,size:null,pageSize:null,total:null,head:"",name:""}},created:function(){this.getList()},methods:{handleCurrentChange:function(e){this.page=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t=this.page;this.$api.user.personal_home(function(t){e.loading=!1,e.head=t.head,e.name=t.name,e.tableData=t.article,e.total=t.pageInfo.total,e.pageSize=t.pageInfo.pages,e.size=t.pageInfo.pageSize},{pageNum:t,userId:parseInt(this.$route.params.userId)})},deleteCol:function(e){var t=this;this.$confirm("确定删除此条状态吗?","提示",{confirmButtonText:"狠心删除",cancelButtonText:"点错了",type:"warning"}).then(function(){t.$api.user.personal_home_delete(function(){t.$notify({type:"success",message:"删除成功!"}),t.getList()},{id:e})}).catch(function(){t.$notify({type:"info",message:"已取消删除"})})}}},r=a("XyMi");var o=function(e){a("TWe6")},s=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/users/list"}}},[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",{staticClass:"now_page"},[e._v("个人主页")])],1),e._v(" "),a("hr"),e._v(" "),a("section",[a("aside",[a("div",{staticClass:"head"},[a("img",{attrs:{src:e.$oss.url+e.head,alt:"",width:"100"}}),e._v(" "),a("h4",[e._v(e._s(e.name))])])]),e._v(" "),a("article",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"发布时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("moment")(new Date(t.row.createTime),"YYYY-MM-DD HH:mm:ss"))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"文字内容",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"媒体内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.coverType?a("p",[e._v("暂无资源")]):e._e(),e._v(" "),0==t.row.coverType?a("div",e._l(t.row.coverResources,function(t,n){return a("img",{key:n,staticStyle:{margin:"0 3px 3px 0"},attrs:{src:e.$oss.url+t,alt:"",width:"100"}})}),0):e._e(),e._v(" "),1==t.row.coverType?a("div",e._l(t.row.coverResources,function(t,n){return a("video",{key:n,attrs:{src:e.$oss.url+t,width:"200",controls:"controls"}})}),0):e._e(),e._v(" "),2==t.row.coverType?a("div",e._l(t.row.coverResources,function(e,n){return a("audioPlayer",{key:n,staticStyle:{"margin-left":"50px"},attrs:{url:e,second:t.row.second}})}),1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文章状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(0==t.row.state?"待审核 ":1==t.row.state?"已审核":2==t.row.state?"审核失败":"")+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteCol(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","page-size":e.size,background:"","page-count":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1)},[],!1,o,"data-v-cb651278",null);t.default=s.exports},TWe6:function(e,t){}});