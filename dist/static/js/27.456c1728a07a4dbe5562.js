webpackJsonp([27],{ZtDd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),l=a("exGp"),i=a.n(l),o={components:{audioPlayer:a("gWLT").a},data:function(){return{loading:!1,search:{luyin:"",type:"",status:"0"},tableData:[],page:1,total:null,size:null,count:null,unreviewedData:[],url:""}},created:function(){this.getList()},methods:{play_click:function(e,t,a){var s=this;return i()(n.a.mark(function t(){var l,i,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.clear(),s.palyIndex=a,t.next=4,s.tableData.map(function(e){s.$set(e,"isShow",!0)});case 4:for(l=document.getElementsByTagName("audio"),i="http://sounds-miyu.oss-cn-hangzhou.aliyuncs.com/"+e,o=l.length-1;o>=0;o--)l[o].src==i&&(l[o].play(),s.paused_click(o));return t.next=9,s.$set(s.tableData[a],"isShow",!1);case 9:case"end":return t.stop()}},t,s)}))()},paused_click:function(e){for(var t=document.getElementsByTagName("audio"),a=t.length-1;a>=0;a--)a!=e&&t[a].pause()},pauseClick:function(e){this.$set(this.tableData[e],"isShow",!0)},ended:function(e){e.isShow=!0},imgClick:function(e){this.url=e},handleCurrentChange:function(e){this.page=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t=this.page;this.$api.store.personal_list(function(t){e.loading=!1,e.tableData=t.result,e.tableData.map(function(t){e.$set(t,"isShow",!0)}),e.total=t.pageInfo.total,e.size=t.pageInfo.pageSize,e.count=t.pageInfo.pages},{pageNum:t,name:""==this.search.luyin?null:this.search.luyin,userType:parseInt(this.search.type),sexType:parseInt(this.search.sex),status:parseInt(this.search.status)})},shenhePass:function(e,t){var a=this;this.$api.store.personal_sh(function(){a.$notify({type:"success",message:"审核成功！",title:"成功"}),a.getList()},{id:e,resultType:t})},deleteInformation:function(e){var t=this;console.log(123),this.$confirm("删除此条消息，新秀/大V区将不再显示该用户信息?","提示",{confirmButtonText:"狠心删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.store.personal_delete(function(){t.$notify({type:"success",message:"删除成功！",title:"成功"}),t.getList()},{id:e})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},r=a("XyMi");var c=function(e){a("isOr")},u=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[e._v("交易商城和语音")]),e._v(" "),a("el-breadcrumb-item",{staticClass:"now_page"},[e._v("个人介绍")])],1)],1),e._v(" "),a("section",[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"录音人",size:"mini",clearable:""},model:{value:e.search.luyin,callback:function(t){e.$set(e.search,"luyin",t)},expression:"search.luyin"}}),e._v(" "),a("el-select",{staticClass:"searchInput",attrs:{placeholder:"用户等级",size:"mini",clearable:""},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},[a("el-option",{attrs:{label:"新秀",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"大V",value:"1"}})],1),e._v(" "),a("el-select",{staticClass:"searchInput",attrs:{placeholder:"性别",size:"mini",clearable:""},model:{value:e.search.sex,callback:function(t){e.$set(e.search,"sex",t)},expression:"search.sex"}},[a("el-option",{attrs:{label:"女",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"男",value:"1"}})],1),e._v(" "),a("el-select",{staticClass:"searchInput",attrs:{placeholder:"状态",size:"mini",clearable:""},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},[a("el-option",{attrs:{label:"待审核",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已审核",value:"1"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.getList()}}},[e._v("查询")])],1),e._v(" "),a("main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.tableData,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"date",label:"录音时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("moment")(new Date(t.row.createTime),"YYYY-MM-DD HH:mm:ss"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"录音人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"用户等级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0==t.row.role?"大V":1==t.row.role?"新秀":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0==t.row.sex?"女":1==t.row.sex?"男":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"播放语音",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"box"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!0===t.row.isShow,expression:"props.row.isShow === true"}],staticClass:"play_button",on:{click:function(a){e.play_click(t.row.voice,t.row,t.$index)}}},[a("i",{staticClass:"ion ion-ios-play align-middle"})]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!1===t.row.isShow,expression:"props.row.isShow === false"}],staticClass:"play_button",on:{click:function(a){e.paused_click(),e.pauseClick(t.$index)}}},[a("i",{staticClass:"ion ion-ios-pause align-middle"})]),e._v(" "),a("audio",{ref:"personal_play",attrs:{src:e.$oss.url+t.row.voice},on:{ended:function(a){e.ended(t.row)}}}),e._v(" "),a("span",[e._v(e._s(t.row.second)+"s")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("viewer",{attrs:{images:[t.row.picture]}},[a("img",{attrs:{src:e.$oss.url+t.row.picture,alt:"",width:"100"}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0==t.row.status?"待审核":1==t.row.status?"已审核":"")+"\n        ")]}}])}),e._v(" "),"0"===this.search.status?a("el-table-column",{attrs:{label:"审核",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"shenheBtn",attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){e.shenhePass(t.row.id,1)}}},[e._v("审核通过\n          ")]),e._v(" "),a("el-button",{staticClass:"shenheBtn",attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){e.shenhePass(t.row.id,2)}}},[e._v("审核不通过\n          ")])]}}])}):a("el-table-column",{attrs:{label:"删除",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"shenheBtn",attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){e.deleteInformation(t.row.id)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","page-size":e.size,background:"","page-count":e.count,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},[],!1,c,"data-v-72e82983",null);t.default=u.exports},isOr:function(e,t){}});