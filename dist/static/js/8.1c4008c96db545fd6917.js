webpackJsonp([8],{CtW5:function(t,e){},Ente:function(t,e){},Hk5f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"official",data:function(){return{num:-1,input:"",flag:!0,loading:!1,articleDetails:{},size:null,pageSize:null,total:null,page:1,tableData:{}}},created:function(){},mounted:function(){this.getList()},methods:{handleCurrentChange:function(t){this.page=t,this.getList()},getList:function(){var t=this,e=this.page;this.loading=!0,this.$api.find.gfdt_list(function(e){t.tableData=e,void 0==e.data?(t.loading=!1,t.$notify({type:"success",message:"暂无官方动态"})):(t.loading=!1,t.articleDetails=e.data,t.total=e.pageNum.total,t.size=e.pageNum.pageSize,t.pageSize=e.pageNum.pages)},{pageNum:e})},deletePinglun:function(t){var e=this;this.$confirm("确定要删除此条评论吗?","提示",{confirmButtonText:"狠心删除",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.find.gfdt_delete(function(){e.$message({type:"success",message:"删除评论成功!",title:"成功"}),e.getList()},{id:t})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},deleteDongtai:function(){var t=this;this.$confirm("确定要删除此条官方动态吗?","提示",{confirmButtonText:"狠心删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.find.delete(function(){t.$message({type:"success",message:"删除评论成功!",title:"成功"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},answer:function(t){this.num=t},remove:function(){this.num=-1},comment:function(){var t=this;this.$api.find.publish_comment(function(e){t.input="",t.num=-1,t.getList()},{articleId:this.articleDetails.id,content:this.input,quoteId:this.articleDetails.comments[this.num].commentId})},delComment:function(t){var e=this;this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.find.gfdt_delete(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})},{id:t})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},computed:{reversion:function(){return!(this.input.length>0)}}},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h3",[this._v("官方动态")]),this._v(" "),e("hr")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("img",{staticClass:"picture",attrs:{src:i("k4dp"),alt:""}})])}],n=i("XyMi");var l=function(t){i("CtW5"),i("Ente")},c=Object(n.a)(a,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t._m(0),t._v(" "),void 0!==t.tableData.data?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{overflow:"hidden"}},[a("aside",[a("p",[t._v("点赞数: "),a("span",[t._v(t._s(t.articleDetails.likeNum))])]),t._v(" "),a("p",[t._v("收藏数: "),a("span",[t._v(t._s(t.articleDetails.collectNum))])]),t._v(" "),a("p",[t._v("转发数: "),a("span",[t._v(t._s(t.articleDetails.transpondNum))])]),t._v(" "),a("p",[t._v("浏览量: "),a("span",[t._v(t._s(t.articleDetails.pageViewNum))])]),t._v(" "),a("el-button",{staticClass:"deitor_dongtai",on:{click:function(e){t.$router.push({name:"discoverEditor",params:{id:t.articleDetails.id,coverType:t.articleDetails.coverType,url:t.articleDetails.officialHead,title:t.articleDetails.officialName,article:t.articleDetails.content,label:t.articleDetails.labelName,type:t.articleDetails.coverType,labelId:t.articleDetails.labelId,imgs:t.articleDetails.coverResources}})}}},[t._v("编辑动态")])],1),t._v(" "),a("section",[a("div",{staticClass:"header"},[a("div",{staticClass:"header_img"},[a("img",{staticStyle:{float:"left"},attrs:{src:t.$oss.url+t.articleDetails.officialHead,alt:"",width:"100",height:"100"}}),t._v(" "),a("h3",{staticStyle:{float:"left"}},[t._v(t._s(t.articleDetails.officialName))])]),t._v(" "),a("div",{staticClass:"article_name"},[a("p",[t._v(t._s(t._f("moment")(new Date(t.articleDetails.createTime),"YYYY-MM-DD HH:mm:ss")))])])]),t._v(" "),a("div",{staticClass:"article"},[a("el-input",{staticStyle:{width:"90%","margin-left":"5%"},attrs:{type:"textarea",readonly:"",placeholder:"请输入内容"},model:{value:t.articleDetails.content,callback:function(e){t.$set(t.articleDetails,"content",e)},expression:"articleDetails.content"}})],1),t._v(" "),a("div",{staticClass:"article_images"},[t._l(t.articleDetails.coverResources,function(e,i){return[0==t.articleDetails.coverType?a("img",{key:i,staticClass:"article_images_img",attrs:{src:t.$oss.url+e,alt:""}}):t._e()]}),t._v(" "),1==t.articleDetails.coverType?a("video",{attrs:{src:t.$oss.url+t.articleDetails.coverResources[0],controls:"controls",width:"200",height:"200"}}):t._e(),t._v(" "),2==t.articleDetails.coverType?a("audio",{attrs:{src:t.$oss.url+t.articleDetails.coverResources[0],controls:"controls"}}):t._e()],2)]),t._v(" "),a("main",[a("ul",t._l(t.articleDetails.comments,function(e,s){return a("li",{key:s},[a("div",[a("img",{staticStyle:{float:"left"},attrs:{src:t.$oss.url+e.userHead,alt:"",width:"50",height:"50"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{"font-weight":"bold",color:"#666","margin-right":"10px"}},[t._v(t._s(e.userName)+":")]),t._v(" "),a("span",{staticClass:"plContent"},[t._v(t._s(e.content))])]),t._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(i){t.deletePinglun(e.commentId)}}})]),t._v(" "),a("el-button",{staticClass:"answer",attrs:{size:"medium",type:"text",plain:""},on:{click:function(e){t.answer(s)}}},[t._v("回复")]),t._v(" "),a("span",{staticStyle:{position:"absolute",right:"10px",top:"52px"}},[t._v("\n                        "+t._s(t._f("moment")(new Date(e.createTime),"YYYY-MM-DD HH:mm:ss"))+"\n                    ")]),t._v(" "),e.commentList.length?a("ul",t._l(e.commentList,function(s,n){return a("li",{key:n},[a("div",{staticClass:"container"},[a("img",{attrs:{src:i("k4dp"),alt:""}}),t._v(" "),a("div",{staticClass:"right-container"},[a("p",{staticClass:"item"},[a("span",[a("span",[t._v("Sounds官方 回复 "+t._s(e.userName)+" :")]),t._v(" "),a("span",[t._v(t._s(s.content))])]),t._v(" "),a("el-button",{staticStyle:{width:"50px"},attrs:{size:"medium",type:"text",plain:""},on:{click:function(e){t.delComment(s.commentId)}}},[t._v("删除")])],1),t._v(" "),a("p",{staticClass:"reply"},[a("span",[t._v(t._s(t._f("moment")(new Date(s.createTime),"YYYY-MM-DD HH:mm:ss")))])])])])])}),0):t._e(),t._v(" "),s==t.num?a("div",{staticClass:"publish"},[t._m(1,!0),t._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入回复的内容",autofocus:t.flag},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",disabled:t.reversion},on:{click:function(e){t.comment()}}},[t._v("回复")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.remove()}}},[t._v("取消")])],1)]):t._e()],1)}),0),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","page-size":t.size,background:"","page-count":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])]):a("div",{staticStyle:{height:"300px"}},[a("h3",{staticStyle:{"line-height":"300px","text-align":"center",color:"red"}},[t._v("暂无官方动态！")])]),t._v(" "),a("div",{staticClass:"delete"},[void 0!==t.tableData.data?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.deleteDongtai()}}},[t._v("删除")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.$router.push({name:"discoverEditor",query:{methods:"add"}})}}},[t._v("新增")])],1)])},s,!1,l,"data-v-3b9370ba",null);e.default=c.exports}});